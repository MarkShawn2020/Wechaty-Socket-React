(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{174:function(e,t,a){e.exports=a.p+"static/media/vase-red.61152727.png"},339:function(e,t,a){e.exports=a.p+"static/media/\u652f\u4ed8\u5b9d\u6536\u6b3e.39f03037.jpg"},340:function(e,t,a){e.exports=a.p+"static/media/\u5fae\u4fe1\u6536\u6b3e.cc3538a0.png"},347:function(e,t,a){e.exports=a.p+"static/media/\u5c0f\u6210\u65f6\u5149\u5c4b.f313bc43.png"},372:function(e,t,a){e.exports=a(706)},409:function(e,t){},541:function(e,t){},543:function(e,t){},554:function(e,t){},556:function(e,t){},583:function(e,t){},585:function(e,t){},586:function(e,t){},592:function(e,t){},594:function(e,t){},612:function(e,t){},614:function(e,t){},626:function(e,t){},629:function(e,t){},702:function(e,t,a){},703:function(e,t,a){},704:function(e,t,a){},705:function(e,t,a){},706:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),c=a(19),l=a.n(c),i=a(14),o=a(26),u=a(708),m=a(55),E=a.n(m),d=a(84),_=a(154),f=a(51),S=a(66),p=a(335),R=a(237),N=a(144),h=a(336),O=a(337),b=a.n(O),g=a(89),C=a.n(g);!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED_FOR_UNKNOWN=1]="FAILED_FOR_UNKNOWN",e[e.FAILED_FOR_YOU_SHOULD_LOGIN_FIRST=2]="FAILED_FOR_YOU_SHOULD_LOGIN_FIRST",e[e.FAILED_FOR_SOCKET_NOT_INITIALIZED=3]="FAILED_FOR_SOCKET_NOT_INITIALIZED",e[e.SERVER_REQUEST_FAIL_FOR_BUSY=4]="SERVER_REQUEST_FAIL_FOR_BUSY",e[e.SERVER_REQUEST_FAIL_FOR_NOT_PRIVILEGE=5]="SERVER_REQUEST_FAIL_FOR_NOT_PRIVILEGE",e[e.SERVER_REQUEST_FAIL_FOR_NAME_EMPTY=6]="SERVER_REQUEST_FAIL_FOR_NAME_EMPTY",e[e.SERVER_REQUEST_FAIL_FOR_NAME_CONFLICT=7]="SERVER_REQUEST_FAIL_FOR_NAME_CONFLICT",e[e.SERVER_REQUEST_FAIL_FOR_TOKEN_NOT_VALID=8]="SERVER_REQUEST_FAIL_FOR_TOKEN_NOT_VALID",e[e.SERVER_REQUEST_FAIL_FOR_BOT_START_ERROR=9]="SERVER_REQUEST_FAIL_FOR_BOT_START_ERROR",e[e.SOCKET_DISCONNECTED_NOT_DAEMON=10]="SOCKET_DISCONNECTED_NOT_DAEMON",e[e.SOCKET_DISCONNECTED_WITH_DAEMON=11]="SOCKET_DISCONNECTED_WITH_DAEMON",e[e.USER_REGISTER_FAILED_FOR_NAME_EXISTED=12]="USER_REGISTER_FAILED_FOR_NAME_EXISTED",e[e.USER_REGISTER_FAILED_FOR_INVALID_USERNAME=13]="USER_REGISTER_FAILED_FOR_INVALID_USERNAME",e[e.USER_REGISTER_FAILED_FOR_INVALID_PASSWORD=14]="USER_REGISTER_FAILED_FOR_INVALID_PASSWORD",e[e.USER_REGISTER_FAILED_FOR_UNKNOWN_REASONS=15]="USER_REGISTER_FAILED_FOR_UNKNOWN_REASONS",e[e.USER_LOGIN_FAILED_FOR_NOT_EXIST=16]="USER_LOGIN_FAILED_FOR_NOT_EXIST",e[e.USER_LOGIN_FAILED_FOR_INCORRECT_PASSWORD=17]="USER_LOGIN_FAILED_FOR_INCORRECT_PASSWORD",e[e.USER_LOGIN_FAILED_FOR_INCORRECT_USERNAME_OR_PASSWORD=18]="USER_LOGIN_FAILED_FOR_INCORRECT_USERNAME_OR_PASSWORD",e[e.USER_LOGIN_FAILED_FOR_INVALID_USERNAME=19]="USER_LOGIN_FAILED_FOR_INVALID_USERNAME",e[e.USER_LOGIN_FAILED_FOR_INVALID_PASSWORD=20]="USER_LOGIN_FAILED_FOR_INVALID_PASSWORD",e[e.USER_LOGIN_FAILED_FOR_UNKNOWN_REASONS=21]="USER_LOGIN_FAILED_FOR_UNKNOWN_REASONS"}(n||(n={}));var I=a(363),T=a(153),v=a.n(T);v.a.defaults.baseURL="http://wechat.nanchuan.site/api/",v.a.defaults.timeout=1e4;var y,x,w,F,k,L,A,D,M,U=v.a,j=v.a,P={login:"/account/login",register:"/account/register",basic:"/account/basic"},W={basic:"/wechat/basic",friends:"/wechat/friends",contactsCount:"/wechat/friends-count",rooms:"/wechat/rooms"},V={add:"/service/request",feedback:"/service/feedback"};!function(e){e.Recall="recall",e.Timing="timing",e.Backup="backup",e.Avatar="avatar",e.Network="network"}(y||(y={})),function(e){e[e.WEB=0]="WEB",e[e.PAD=1]="PAD",e[e.MOBILE=2]="MOBILE"}(x||(x={})),function(e){e[e.Unknown=0]="Unknown",e[e.Cancel=1]="Cancel",e[e.Waiting=2]="Waiting",e[e.Scanned=3]="Scanned",e[e.Confirmed=4]="Confirmed",e[e.Timeout=5]="Timeout"}(w||(w={})),function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.RUNNING=2]="RUNNING",e[e.DAEMON=3]="DAEMON",e[e.ERROR=4]="ERROR"}(F||(F={})),function(e){e.Users="users",e.Wechats="wechats",e.Rooms="rooms",e.Friends="friends",e.Services="services",e.Feedback="feedback"}(k||(k={})),function(e){e.LoginModal="login_modal",e.FeedbackModal="feedback_modal",e.ScanModal="scan_modal"}(L||(L={})),function(e){e.FriendsPulling="contacts_pulling",e.RoomsPulling="rooms_pulling",e.ServerRequesting="server_requesting",e.ServerStarting="server_starting",e.BackendConnected="backend_connected",e.LoggingOut="logging_out",e.RobotRunning="robot_running"}(A||(A={})),function(e){e.user="user",e.wechat="wechat"}(D||(D={}));var H,G,Y,B={username:"",hasLogined:!1,remember:!0,deadTime:C()().add(7,"d").toDate()},X={status:w.Unknown,qrcode:""},q={_id:"",id:"",friend:!0,gender:0,type:0,phone:[],alias:"",avatar:"",city:"",name:"",province:"",signature:"",weixin:""},Q=(M={},Object(f.a)(M,A.FriendsPulling,!1),Object(f.a)(M,A.RoomsPulling,!1),Object(f.a)(M,A.BackendConnected,!1),Object(f.a)(M,A.ServerRequesting,!1),Object(f.a)(M,A.ServerStarting,!1),Object(f.a)(M,A.RobotRunning,!1),Object(f.a)(M,L.FeedbackModal,!1),Object(f.a)(M,L.LoginModal,!1),Object(f.a)(M,L.ScanModal,!1),Object(f.a)(M,A.LoggingOut,!1),M);!function(e){e.WX_SCAN="scan",e.WX_MESSAGE="message",e.WX_LOGIN="login",e.WX_LOGOUT="logout",e.WX_START="start",e.WX_STOP="stop",e.WX_FRIENDSHIP="friendship",e.SERVER_CONNECTION="connection",e.SERVER_CONNECT="connect",e.SERVER_DISCONNECT="disconnect",e.SERVER_PUSH_STATUS="server_status",e.SERVER_PUSH_USER_CHAT="user_message",e.SERVER_WECHAT_READY="server_wechat_ready",e.CLIENT_REQUEST_SERVER="request_server",e.CLIENT_RELEASE_SERVER="request_server_logout_self",e.CLIENT_REPLACE_SERVER="request_server_logout_other",e.CLIENT_DAEMON_SERVER_OR_NOT="daemon_server",e.CLIENT_REFRESH_CONTACTS="request_contacts",e.CLIENT_SEND_USER_CHAT="push_user_message",e.CLIENT_SEND_WX_MESSAGE="send_message",e.CLIENT_SUBMIT_SETTINGS="submit_settings"}(H||(H={})),function(e){e.FETCH_FRIENDS="fetch_friends",e.FETCH_MORE_FRIENDS="fetch_more_friends",e.FETCH_MORE_FRIENDS_SUCCESS="fetch_more_friends_success",e.FETCH_FRIENDS_SUCCESS="fetch_friends_success",e.FETCH_FRIENDS_ERROR="fetch_friends_error",e.FETCH_FRIENDS_COUNT_SUCCESS="fetch_friends_count_success",e.FETCH_ROOMS_SUCCESS="fetch_rooms_success",e.FETCH_ROOMS_ERROR="fetch_rooms_error"}(G||(G={})),function(e){e.SWITCH_STATUS="switch_status",e.UPDATE_USER="update_user"}(Y||(Y={})),C.a.locale("zh-cn");var K=new I.a,z=new(function(){function e(){var t=this;Object(p.a)(this,e),this.appName="\u5c0f\u6210\u65f6\u5149\u5c4b",this.socket=void 0,this.username="",this.user=K.get(D.user)||B,this.userMessages=[],this.wxSelf=K.get(D.wechat)||q,this.wxScan=X,this.wxMessages=[],this.wxFriends=[],this.wxFriendsCount=0,this.wxRooms=[],this.clients=0,this.servers=[],this.status=Q,this.bindEvents=function(){for(var e in H)H.hasOwnProperty(e)&&function(){console.log("event -> "+e);var a=H[e];t.socket.on(a,(function(e){Z.dispatch({type:a,payload:e})}))}()};var a="ws://wechat.nanchuan.site/";console.log("connecting to ",a),this.socket=b()(a),this.bindEvents()}return Object(R.a)(e,[{key:"state",get:function(){return{appName:this.appName,username:this.username,user:this.user,clients:this.clients,servers:this.servers,wxScan:this.wxScan,wxSelf:this.wxSelf,wxFriends:this.wxFriends,wxFriendsCount:this.wxFriendsCount,wxRooms:this.wxRooms,wxMessages:this.wxMessages,userMessages:this.userMessages,status:this.status}}}]),Object(R.a)(e,[{key:"handleActions",value:function(e,t,a){var r=this;switch(console.log("action: ",e),e){case H.SERVER_WECHAT_READY:this.status[A.FriendsPulling]=!0,this.fetchFriendsCount().then(),this.fetchRooms().then();break;case H.SERVER_CONNECTION:case H.SERVER_CONNECT:case H.SERVER_DISCONNECT:break;case H.CLIENT_REQUEST_SERVER:this.status[A.ServerRequesting]=!0,this.socket.emit(H.CLIENT_REQUEST_SERVER,t,(function(e){e===n.SUCCESS&&(r.status[A.ServerRequesting]=!1,r.status[A.ServerStarting]=!0,console.log("server requested")),a&&a(e)}));break;case H.CLIENT_RELEASE_SERVER:this.status=Object(S.a)(Object(S.a)({},this.status),{},Object(f.a)({},A.LoggingOut,!0)),this.socket.emit(H.CLIENT_RELEASE_SERVER,(function(e){console.log("server released"),r.status=Object(S.a)(Object(S.a)({},r.status),{},Object(f.a)({},A.LoggingOut,!1))}));break;case H.CLIENT_REPLACE_SERVER:this.socket.emit(H.CLIENT_REPLACE_SERVER);break;case H.CLIENT_DAEMON_SERVER_OR_NOT:this.socket.emit(H.CLIENT_DAEMON_SERVER_OR_NOT,(function(e){console.log("\u5207\u6362\u6258\u7ba1\u72b6\u6001\u5b8c\u6210")}));break;case H.CLIENT_SEND_USER_CHAT:this.socket.emit(H.CLIENT_SEND_USER_CHAT,t);break;case H.SERVER_PUSH_USER_CHAT:this.userMessages=[].concat(Object(_.a)(this.userMessages),[t]);break;case H.CLIENT_SEND_WX_MESSAGE:this.socket.emit(H.CLIENT_SEND_WX_MESSAGE,t,(function(e){a&&a(e)}));break;case H.SERVER_PUSH_STATUS:var s=t,c=s.clients,l=s.servers;this.status[A.BackendConnected]=!0,this.clients=c,this.servers=l;break;case H.WX_SCAN:this.wxScan=t,this.status[L.ScanModal]=!0;break;case H.WX_LOGIN:this.user.hasLogined=!0,this.wxSelf=t,this.status[L.ScanModal]=!1,this.status[A.ServerStarting]=!1,this.status[A.RobotRunning]=!0,K.set(D.wechat,this.wxSelf);break;case H.WX_LOGOUT:this.status[A.RobotRunning]=!1,console.log("\u5fae\u4fe1\u5df2\u4e0b\u7ebf"),console.log({payload:t});break;case H.WX_MESSAGE:this.wxMessages=[].concat(Object(_.a)(this.wxMessages),[t]);break;case Y.SWITCH_STATUS:var i=t,o=i.key,u=i.toState;this.status=void 0===u?Object(S.a)(Object(S.a)({},this.status),{},Object(f.a)({},o,!this.status[o])):Object(S.a)(Object(S.a)({},this.status),{},Object(f.a)({},o,u));break;case Y.UPDATE_USER:this.user=Object(S.a)({},t),this.user.remember&&K.set(D.user,this.user),console.log("\u66f4\u65b0\u7528\u6237\u72b6\u6001\u6210\u529f");break;case G.FETCH_FRIENDS:break;case G.FETCH_FRIENDS_SUCCESS:this.wxFriends=t,this.status[A.FriendsPulling]=!1,console.log("\u62c9\u53d6\u597d\u53cb\u6570\u636e\u5b8c\u6210\uff0c\u6570\u76ee: ",this.wxFriends.length);break;case G.FETCH_FRIENDS_ERROR:console.log("\u62c9\u53d6\u597d\u53cb\u6570\u636e\u5931\u8d25\uff0c\u62a5\u9519\u5982\u4e0b"),console.warn(t);break;case G.FETCH_FRIENDS_COUNT_SUCCESS:this.wxFriendsCount=t;break;case G.FETCH_MORE_FRIENDS_SUCCESS:this.wxFriends=[].concat(Object(_.a)(this.wxFriends),Object(_.a)(t));break;case G.FETCH_ROOMS_SUCCESS:this.wxRooms=t,console.log("\u62c9\u53d6\u7fa4\u7ec4\u6570\u636e\u5b8c\u6210\uff0c\u6570\u76ee: ",this.wxRooms.length);break;case G.FETCH_ROOMS_ERROR:console.log("\u62c9\u53d6\u7fa4\u7ec4\u6570\u636e\u5931\u8d25\uff0c\u62a5\u9519\u5982\u4e0b\uff1a"),console.warn(t);break;case H.WX_START:case H.WX_STOP:case H.WX_FRIENDSHIP:case H.CLIENT_REFRESH_CONTACTS:break;case H.CLIENT_SUBMIT_SETTINGS:this.socket.emit(H.CLIENT_SUBMIT_SETTINGS,t,(function(e){console.log({code:e})}))}}},{key:"fetchFriendsCount",value:function(){var e=Object(d.a)(E.a.mark((function e(){var t=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z.dispatch((function(e){U.get(W.contactsCount,{params:{wxid:t.wxSelf.id}}).then((function(t){var a=t.data;return e({type:G.FETCH_FRIENDS_COUNT_SUCCESS,payload:a})}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchFriends",value:function(){var e=Object(d.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\u6b63\u5728\u62c9\u53d6\u597d\u53cb\u6570\u636e"),t={wxid:this.wxSelf.id,skip:0,limit:100,onlyFriends:!0},e.abrupt("return",Z.dispatch((function(e){return U.get(W.friends,{params:t}).then((function(t){var a=t.data;e({type:G.FETCH_FRIENDS_SUCCESS,payload:a})})).catch((function(t){e({type:G.FETCH_FRIENDS_ERROR,payload:t})}))})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchRooms",value:function(){var e=Object(d.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\u6b63\u5728\u62c9\u53d6\u7fa4\u6570\u636e"),t={wxid:this.wxSelf.id,limit:1e3},e.abrupt("return",Z.dispatch((function(e){return U.get(W.rooms,{params:t}).then((function(t){var a=t.data;e({type:G.FETCH_ROOMS_SUCCESS,payload:a})})).catch((function(t){e({type:G.FETCH_ROOMS_ERROR,payload:t})}))})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),J=z.state;console.log({INITIALIZED_STORE:J});var Z=Object(N.c)((function(){var e=arguments.length>1?arguments[1]:void 0;return z.handleActions(e.type,e.payload,e.callback),z.state}),Object(N.a)(h.a));z.user.hasLogined&&Z.dispatch({type:H.CLIENT_SEND_USER_CHAT,payload:{username:"SYSTEM",content:"".concat(z.user.username,"\u5df2\u4e0a\u7ebf"),time:new Date}});var $,ee=Z,te=function(){var e=ee.getState().user;return s.a.createElement("span",{className:"inline-flex"},e&&e.username||"\u7528\u6237\u72b6\u6001"," \uff1a",e.hasLogined?s.a.createElement("p",{className:"text-green-500"},"\u5df2\u767b\u5f55"):s.a.createElement("p",{className:"text-red-500"},"\u672a\u767b\u5f55"))},ae=a(707),ne=a(723),re=Object(ne.a)({scriptUrl:"//at.alicdn.com/t/font_2081653_t75v5p9r6ic.js",extraCommonProps:{className:"text-2xl"}});!function(e){e.PUPPET_WEB="icon-Web",e.PUPPET_MOBILE="icon-mobile",e.PUPPET_PAD="icon-pad",e.PUPPET_MAC="icon-mac",e.DOT_CONNECTED="icon-dot-connected",e.GENDER_FEMALE="icon-gender-female",e.GENDER_MALE="icon-gender-male",e.RIGHT="icon-right",e.WRONG="icon-wrong",e.COFFEE="icon-coffee",e.SUBMIT="icon-submit",e.WARNING="icon-warning"}($||($={}));var se=re,ce=a(719),le=a(171),ie=a(724),oe=Object(o.b)((function(e){return{servers:e.servers}}))((function(e){return s.a.createElement("span",{className:"inline-flex"},e.servers.length>0?s.a.createElement("span",{className:"text-green-500 flex items-center"},"ONLINE ",s.a.createElement(se,{type:$.DOT_CONNECTED,className:"text-xl"})):s.a.createElement(ce.b,{size:"large"},s.a.createElement("span",{className:"text-red-500"},"CONNECTING"),s.a.createElement(le.a,{indicator:s.a.createElement(ie.a,{className:"text-red-500",spin:!0})})))})),ue=Object(o.b)((function(e){return{clients:e.clients}}))((function(e){return s.a.createElement("span",null,"\u5728\u7ebf\u4eba\u6570\uff1a",e.clients)})),me=function(){return console.log("rendered CompStatus"),s.a.createElement("div",{className:"w-full py-2 px-4 inline-flex items-center justify-center text-gray-500"},s.a.createElement(te,null),s.a.createElement(ae.a,{type:"vertical"}),s.a.createElement(ue,null),s.a.createElement(ae.a,{type:"vertical"}),s.a.createElement(oe,null))},Ee=a(174),de=a.n(Ee),_e=function(){return console.log("rendered CompFooter"),s.a.createElement("div",{className:"w-full flex flex-col justify-center items-center"},s.a.createElement("img",{src:de.a,alt:"vase",className:"w-16 m-auto hidden md:block"}),s.a.createElement(me,null),s.a.createElement("ul",{className:"text-gray-500 text-center"},s.a.createElement("li",null,"Powered By React, SocketIO, Wechaty"),s.a.createElement("li",null,"Author:"," ",s.a.createElement("a",{href:"https://github.com/MarkShawn2020",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 underline"},"MarkShawn"),", Date: 2020-09-18"),s.a.createElement("li",null,"Inspired and Specialized for"," ",s.a.createElement("span",{className:"underline"},"Cheng XingYu"))))},fe=a(38),Se=a(112),pe=a(711),Re=a(714),Ne=a(716),he=a(367),Oe=a(368),be=a(713),ge=a(59),Ce=a(125),Ie=a(339),Te=a.n(Ie),ve=a(340),ye=a.n(ve),xe=function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"flex justify-around mb-4"},s.a.createElement("img",{src:Te.a,alt:"\u652f\u4ed8\u5b9d\u6536\u6b3e\u7801",className:"w-48 h-64"}),s.a.createElement("img",{src:ye.a,alt:"\u5fae\u4fe1\u6536\u6b3e\u7801",className:"w-48 h-64"})),s.a.createElement("div",{className:"text-center text-lg text-gray-700 mb-4"},s.a.createElement("p",null,"\u7ed9\u6211\u4e00\u676f\u5496\u5561\uff0c\u6211\u5c31\u80fd\u6ee1\u8db3\u60a8\u7684\u4e00\u4e2a\u613f\u671b\u3002"),s.a.createElement("p",{className:"italic"},"A Cup of Coffee, A Mr. Meeseeks.")))},we=function(e){return s.a.createElement(pe.a,{id:"feedbackForm",labelCol:{span:6},onFinish:e.onFinishForm,initialValues:{rate:5},form:e.feedback},s.a.createElement(pe.a.Item,{label:"Rate",name:"rate",valuePropName:"defaultValue"},s.a.createElement(Re.a,null)),s.a.createElement(pe.a.Item,{label:"Content",name:"content",rules:[{required:!0,message:"\u53cd\u9988\u6d88\u606f\u5fc5\u586b\u54e6\uff01"}]},s.a.createElement(Ce.a,{rows:2,placeholder:"\u563f\uff0c\u6709\u4ec0\u4e48\u9700\u8981\u6539\u8fdb\u7684\u5417~"})),s.a.createElement(pe.a.Item,{label:"E-Mail",name:"email",rules:[{required:!0,message:"\u7559\u4e2a\u8054\u7cfb\u65b9\u5f0f\u5457\uff01"},{type:"email",message:"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u5408\u6cd5\u54e6\uff01"}],validateTrigger:"onBlur"},s.a.createElement(Ne.a,{placeholder:"xxx@gmail.com"})))},Fe=Object(o.b)((function(e){return{appName:e.appName,visibility:e.status[L.FeedbackModal],user:e.user}}))((function(e){console.log("rendered CompUserFeedback");var t=Object(r.useState)(!1),a=Object(fe.a)(t,2),n=a[0],c=a[1],l=pe.a.useForm(),i=Object(fe.a)(l,1)[0],o=Object(r.useState)(!0),u=Object(fe.a)(o,2),m=u[0],E=u[1],d=function(){return c(!1)};return s.a.createElement("div",null,s.a.createElement("div",{onClick:function(){return c(!0)}},"Feedback"),s.a.createElement(be.a,{visible:n,title:e.appName+"\u4f7f\u7528\u53cd\u9988 ^_^",okButtonProps:{htmlType:"submit"},footer:null,onCancel:d},m?s.a.createElement(we,{onFinishForm:function(t){if(e.user.hasLogined){var a={content:t.content,email:t.email,rate:t.rate,time:new Date,username:e.user.username};U.post(V.feedback,a).then((function(e){1===e.data.insertedCount?Oe.a.success({message:"\u53cd\u9988\u7ed3\u679c",description:"\u53cd\u9988\u6536\u5230\uff0c\u4f7f\u547d\u5fc5\u8fbe\uff01"}):Oe.a.warn({message:"\u53cd\u9988\u7ed3\u679c",description:"\u672a\u80fd\u6210\u529f\u53cd\u9988"})})).catch((function(e){Oe.a.error({message:"\u53cd\u9988\u7ed3\u679c",description:"\u53cd\u9988\u5f02\u5e38"})})),d(),i.resetFields()}else he.b.error({content:"\u8be5\u529f\u80fd\u9700\u8981\u767b\u5f55\u624d\u53ef\u4f7f\u7528"})},feedback:i}):s.a.createElement(xe,null),s.a.createElement("div",{className:"flex justify-end items-center"},s.a.createElement(ce.b,null,s.a.createElement(ge.a,{type:"primary",size:"middle",className:"inline-flex items-center",icon:s.a.createElement(se,{type:$.COFFEE,className:"text-base"}),onClick:function(){return E(!m)}},"Coffee"),s.a.createElement(ge.a,{type:"primary",size:"middle",className:"inline-flex items-center",icon:s.a.createElement(se,{type:$.SUBMIT,className:"text-base"}),form:"feedbackForm",htmlType:"submit",key:"submit"},"Submit")))))})),ke=a(152),Le=a(722),Ae=a(134),De=a.n(Ae);var Me=De.a.enc.Utf8.parse("9f4b2ce5a043ccefe351c90d4b808d0f"),Ue=De.a.enc.Utf8.parse("9761359a0c95b2d16f736c779e603343"),je=function(e){return De.a.AES.encrypt(e,Me,{iv:Ue,mode:De.a.mode.CBC,padding:De.a.pad.Pkcs7}).toString()},Pe=a(725),We=a(726),Ve=Object(o.b)(null,(function(e){return{sendWelcomeChat:function(t){return e({type:H.CLIENT_SEND_USER_CHAT,payload:t})}}}))((function(e){var t=Object(r.useState)(!0),a=Object(fe.a)(t,2),c=a[0],l=a[1],i=Object(r.useState)(!1),o=Object(fe.a)(i,2),u=o[0],m=o[1],_=pe.a.useForm(),f=Object(fe.a)(_,1)[0],S=Object(Le.a)(),p=(Object(fe.a)(S,2)[1],function(){var t=Object(d.a)(E.a.mark((function t(a){var r,s,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),r=je(JSON.stringify(a)),t.next=4,j.post(P.register,{dataEncoded:r});case 4:if(s=t.sent,(c=s.data)!==n.SUCCESS){t.next=14;break}return t.next=9,j.get(P.basic,{params:{username:f.getFieldValue("username")}});case 9:he.b.success({content:"\u6ce8\u518c\u6210\u529f\uff0c\u8bf7\u7528\u65b0\u8d26\u53f7\u767b\u5f55\uff01"}),e.sendWelcomeChat({username:"SYSTEM",content:"\u4e00\u4f4d\u65b0\u670b\u53cb\uff1a".concat(a.username,"\u6ce8\u518c\u6210\u529f"),time:new Date}),l(!0),t.next=15;break;case 14:he.b.error({content:n[c]});case 15:m(!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),R=function(){var t=Object(d.a)(E.a.mark((function t(a){var r,s,c,l,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),r=je(JSON.stringify(a)),t.next=4,j.post(P.login,{dataEncoded:r});case 4:if(s=t.sent,(c=s.data)!==n.SUCCESS){t.next=18;break}return t.next=9,j.get(P.basic,{params:{username:f.getFieldValue("username")}});case 9:l=t.sent,(i=l.data).hasLogined=!0,ee.dispatch({type:Y.UPDATE_USER,payload:i}),he.b.success({content:"\u767b\u5f55\u6210\u529f"}),e.sendWelcomeChat({username:"SYSTEM",content:"".concat(a.username,"\u767b\u5f55\u6210\u529f"),time:new Date}),e.onCloseLoginModal(),t.next=19;break;case 18:he.b.error({content:n[c]});case 19:m(!1);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log({userData:t}),!c){e.next=6;break}return e.next=4,R(t);case 4:e.next=8;break;case 6:return e.next=8,p(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(pe.a,{id:"loginForm",form:f,name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:N},s.a.createElement(pe.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},s.a.createElement(Ne.a,{prefix:s.a.createElement(Pe.a,{className:"site-form-item-icon"}),placeholder:"Username"})),s.a.createElement(pe.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},s.a.createElement(Ne.a,{prefix:s.a.createElement(We.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),!c&&s.a.createElement(pe.a.Item,{name:"password_confirm",dependencies:["password"],rules:[{required:!0,message:"Please confirm your Password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("password do not match!"):Promise.resolve()}}}]},s.a.createElement(Ne.a,{prefix:s.a.createElement(We.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password_confirm"})),s.a.createElement(pe.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,style:{float:"left"}},s.a.createElement(ke.a,null,"Remember me")),s.a.createElement(pe.a.Item,null,s.a.createElement(ge.a,{size:"middle",type:"primary",className:"login-form-button w-full my-2",form:"loginForm",htmlType:"submit",key:"submit"},u?s.a.createElement(le.a,null):c?"\u767b\u5f55":"\u6ce8\u518c")),c?s.a.createElement("div",null,"\u6ca1\u6709\u8d26\u53f7\uff1f"," ",s.a.createElement(ge.a,{type:"text",className:"text-pink-500",onClick:function(){l(!1),f.resetFields()}},"\u7acb\u5373\u6ce8\u518c")):s.a.createElement("div",null,"\u5df2\u6709\u8d26\u53f7\uff1f"," ",s.a.createElement(ge.a,{type:"text",className:"text-pink-500",onClick:function(){return l(!0)}},"\u7acb\u5373\u767b\u5f55")))})),He=Object(o.b)((function(e){return{appName:e.appName,user:e.user,visibility:e.status[L.LoginModal]}}),(function(e){return{updateUserLogout:function(t){return e({type:Y.UPDATE_USER,payload:t})}}}))((function(e){console.log("rendered CompUserLoginModal");var t=Object(r.useState)(!1),a=Object(fe.a)(t,2),n=a[0],c=a[1],l=function(){return c(!1)};return s.a.createElement("div",null,s.a.createElement("div",{onClick:function(){return c(!0)}},"Login/Register"),s.a.createElement(be.a,{title:e.appName+"\u7edf\u4e00\u7528\u6237\u7cfb\u7edf",footer:null,visible:n,onCancel:l,width:400},e.user.hasLogined?s.a.createElement("div",{className:"flex justify-center items-center flex-col"},s.a.createElement("h1",{className:"text-3xl font-semibold"},e.user.username),s.a.createElement("br",null),s.a.createElement(ge.a,{type:"primary",danger:!0,onClick:function(){l(),e.updateUserLogout(Object(S.a)(Object(S.a)({},e.user),{},{hasLogined:!1}))}},"\u9000\u51fa")):s.a.createElement(Ve,{onCloseLoginModal:l})))})),Ge=a(717),Ye=a(91),Be=a(347),Xe=a.n(Be),qe=Object(o.b)((function(e){return{appName:e.appName}}))((function(e){console.log("rendered CompIntro");return s.a.createElement("div",{onClick:function(){return be.a.info({title:e.appName+"\u4f7f\u7528\u8bf4\u660e~",className:"p-0",content:s.a.createElement(Ge.a,{accordion:!0},s.a.createElement("style",{jsx:!0},"\n            .ant-modal-confirm-content {\n              margin-left: 0 !important;\n              margin-top: 8px;\n            }\n          "),s.a.createElement(Ye.a,{key:1,header:"\u5f00\u53d1\u5951\u673a"},s.a.createElement("p",null,"\u672c\u4eba\u5fae\u4fe1\u4f5c\u98ce\u4e25\u8c28\uff0c\u5e38\u64a4\u56de\u8bef\u5b57\u9519\u5b57\uff0c\u4ee5\u81f4\u597d\u53cb\u9891\u9891\u53d1\u95ee\uff0c\u4e3a\u89e3\u6b64\u5fe7\uff0c\u7279\u5f00\u53d1\u6b64\u9879\u76ee\uff0c\u539f\u53ea\u4e3a\u64a4\u56de\u76d1\u63a7\u4e4b\u7528\u3002")),s.a.createElement(Ye.a,{key:2,header:"\u6280\u672f\u80cc\u666f"},s.a.createElement("p",null,"1. \u91d1\u878d\u4e13\u4e1a\uff0c\u7231\u597d\u7f16\u7a0b\uff08\u534e\u4e3a\u524d\u7aef\u7814\u53d1\u5728\u804c\uff09\uff0c\u516c\u4f17\u53f7\u5357\u5ddd\u7b14\u8bb0\uff0c\u64c5\u957fPython\u3001TypeScript\uff0c\u524d\u7aef\u4e3b\u7528React\u3001Vue\u3002"),s.a.createElement("p",null,"2. \u66fe\u7ecf\u4f7f\u7528\u57fa\u4e8ePython\u7684itchat\u3001wxpy\u7b49\u5e93\u5b9e\u73b0\u4e86\u57fa\u4e8e\u7f51\u9875\u534f\u8bae\u7684\u5fae\u4fe1\u673a\u5668\u4eba\uff0c\u672c\u9879\u76ee\u4f7f\u7528\u57fa\u4e8eTypeScript\u7684Wechaty\u5e93\u5b9e\u73b0\u4e86\u57fa\u4e8ePad\u534f\u8bae\u7684\u5fae\u4fe1\u673a\u5668\u4eba\u3002"),s.a.createElement("p",null,"3. \u5f53\u7136\u662fPad\u534f\u8bae\u66f4\u4f18\u4e86\uff0c\u57fa\u672c\u4e0d\u4f1a\u5c01\u53f7\uff0c\u63a5\u8fd1\u5168\u90e8Pad\u7aef\u7684\u5b9e\u4f53\u673a\u529f\u80fd\u3002")),s.a.createElement(Ye.a,{key:3,header:"\u5f00\u53d1\u73b0\u72b6"},s.a.createElement("p",null,"\u76ee\u524d\u5df2\u7ecf\u5b8c\u6210\u4e86\u524d\u7aef\u4e0e\u540e\u7aef\u7684\u6846\u67b6\u642d\u5efa\uff0cUI\u57fa\u672c\u6210\u578b\uff0c\u5df2\u5b9e\u73b0\u4ee5\u4e0b\u529f\u80fd"),s.a.createElement("ul",null,s.a.createElement("li",null,"1. \u81ea\u52a8\u83b7\u53d6\u597d\u53cb\u3001\u7fa4\u7ec4\u5217\u8868\uff0c\u70b9\u51fb\u6d88\u606f\u6309\u94ae\u5373\u53ef\u5feb\u6377\u53d1\u9001\u4fe1\u606f"),s.a.createElement("li",null,"2. \u5b9e\u65f6\u76d1\u63a7\u6240\u6709\u7684\u6d88\u606f\uff08\u597d\u53cb+\u7fa4\u7ec4\uff09\uff0c\u70b9\u51fb\u5373\u53ef\u5feb\u6377\u56de\u590d"),s.a.createElement("li",null,"3. \u652f\u6301\u5b9e\u65f6\u804a\u5929\u5ba4\u529f\u80fd\uff0c\u6d88\u606f\u80fd\u591f\u88ab\u6253\u5f00\u8be5\u7f51\u53cb\u7684\u6240\u6709\u4eba\u770b\u5230"),s.a.createElement("li",null,"4. \u652f\u6301\u670d\u52a1\u5668\u6269\u5c55\uff0c\u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2aWechaty\u7684Token\uff0c\u5b9e\u73b0\u591a\u8d26\u53f7\u670d\u52a1"),s.a.createElement("li",null,"5. \u7531\u4e8e\u76ee\u524d\u53ea\u6709\u4e00\u4e2aToken\uff0c\u56e0\u6b64\u7528\u6237\u9700\u8981\u8f6e\u6d41\u4f7f\u7528\uff0c\u57fa\u4e8e\u6b64\u5b9e\u73b0\u4e86\u4e0b\u7ebf\u3001\u6258\u7ba1\u3001\u8e22\u7ebf\u7b49\u529f\u80fd"))),s.a.createElement(Ye.a,{key:4,header:"\u9879\u76eeTODO"},s.a.createElement("p",null,"1. \u672c\u9879\u76ee\u539f\u5219\u4e0a\u4e0d\u505a\u5546\u7528\uff0c\u6bd5\u7adf\u6ca1\u6709\u5927\u91cftoken\uff0c\u4e14\u5b58\u5728\u4e00\u5b9a\u7684\u76d1\u7ba1\u98ce\u9669"),s.a.createElement("p",null,"2. \u4f46\u672c\u9879\u76ee\u80fd\u5f88\u597d\u5730\u953b\u70bc\u81ea\u5df1\u7684\u5f00\u53d1\u80fd\u529b\uff0c\u5305\u62ec\u5bf9react\u3001socket\u7b49\u7684\u719f\u6089"),s.a.createElement("p",null,'3. \u8fd1\u671f\u53ef\u80fd\u4f1a\u9646\u7eed\u6269\u5c55\u7684\u529f\u80fd\uff0c\u4e3b\u8981\u5c31\u662f\u4e00\u4e9b\u4ea4\u4e92\u4f18\u5316\u4e0e"\u670d\u52a1\u8ba2\u9605"\uff0c\u4e5f\u6b22\u8fce\u540e\u53f0\u7559\u8a00\u53cd\u9988')),s.a.createElement(Ye.a,{key:5,header:"\u9690\u79c1\u8bf4\u660e"},s.a.createElement("ol",null,s.a.createElement("li",null,"1. \u672c\u7f51\u7ad9\u4fe1\u606f\u4f20\u8f93\u8fc7\u7a0b\u91c7\u7528\u9ad8\u7ea7\u522b\u7684\u52a0\u5bc6\u624b\u6bb5\uff0c\u60a8\u7684\u4fe1\u606f\u53ef\u5b89\u5168\u5f55\u5165\u4e0e\u5b58\u50a8"),s.a.createElement("li",null,"2. \u672c\u7f51\u7ad9\u4f5c\u4e3a\u5fae\u4fe1\u7684\u7b2c\u4e09\u65b9\u670d\u52a1\uff0c\u5efa\u8bae\u4e0d\u8981\u4f20\u8f93\u8fc7\u4e8e\u654f\u611f\u4ee5\u53ca\u5176\u4ed6\u8fdd\u53cd\u56fd\u5bb6\u6cd5\u5f8b\u89c4\u5b9a\u7684\u4fe1\u606f"),s.a.createElement("li",null,"3. \u672c\u7f51\u7ad9\u575a\u51b3\u4e0d\u4f1a\u4f7f\u7528\u6216\u6ee5\u7528\u7528\u6237\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5305\u62ec\u5b58\u50a8\u3001\u8f6c\u53d1\u3001\u975e\u6cd5\u4ea4\u6613\uff0c\u5982\u6709\u8fdd\u53cd\uff0c\u53ef\u4e3e\u62a5"),s.a.createElement("li",null,"4. \u611f\u8c22\u60a8\u7684\u652f\u6301\uff0c\u5982\u9700\u6253\u8d4f\u6216\u53cd\u9988\u53ef\u70b9\u51fb\u83dc\u5355\u6309\u94ae\u3010Feedback\u3011\uff0c\u8c22\u8c22\uff01"))),s.a.createElement(Ye.a,{key:6,header:"\u52a0\u5165\u4ea4\u6d41\u7fa4"},s.a.createElement("img",{src:Xe.a,alt:"\u5c0f\u6210\u65f6\u5149\u5c4b\u4ea4\u6d41\u7fa4",className:"mx-auto",style:{width:"200px",height:"300px"}})))})}},s.a.createElement("p",null,"Introduction"))})),Qe=Object(o.b)((function(e){return{appName:e.appName,status:e.status}}),(function(e,t){return{submitSettings:function(t){return e({type:H.CLIENT_SUBMIT_SETTINGS,payload:t})}}}))((function(e){var t=Object(r.useState)(!1),a=Object(fe.a)(t,2),n=a[0],c=a[1],l=pe.a.useForm(null),i=Object(fe.a)(l,1)[0],o=function(){c(!1)};return s.a.createElement("div",null,s.a.createElement("div",{onClick:function(){c(!0)}},"Settings"),s.a.createElement(be.a,{visible:n,onCancel:o,onOk:function(){e.status[A.RobotRunning]?(console.log(i.getFieldsValue()),e.submitSettings(i.getFieldsValue()),o(),he.b.success("\u65b0\u8bbe\u7f6e\u5df2\u751f\u6548\uff01")):he.b.error("\u8be5\u529f\u80fd\u9700\u8981\u5df2\u7533\u8bf7\u5e76\u8fd0\u884c\u5bf9\u5e94\u670d\u52a1\u5668\u65b9\u53ef\u4f7f\u7528\uff01")},title:"".concat(e.appName,"\u8bbe\u7f6e\u7cfb\u7edf")},s.a.createElement(pe.a,{labelCol:{span:8},form:i},s.a.createElement(pe.a.Item,{label:"\u673a\u5668\u4eba\u524d\u7f00\uff08\u65e0\u6362\u884c\uff09",name:"prefix"},s.a.createElement(Ne.a,{placeholder:"from robot: "})),s.a.createElement(pe.a.Item,{label:"\u673a\u5668\u4eba\u540e\u7f00\uff08\u6709\u6362\u884c\uff09",name:"suffix"},s.a.createElement(Ne.a,{placeholder:"from robot"})))))})),Ke=Object(o.b)((function(e){return{appName:e.appName,status:e.status}}),(function(e){return{switchStatus:function(t){return e({type:Y.SWITCH_STATUS,payload:t})}}}))((function(e){console.log("rendered CompHeader");var t=Object(r.useState)("home"),a=Object(fe.a)(t,2),n=a[0],c=a[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{src:de.a,alt:"vase",className:"md:hidden w-8 h-8"}),s.a.createElement("h1",{className:"text-xl text-purple-600 hidden md:block"},e.appName),s.a.createElement(Se.a,{mode:"horizontal",selectedKeys:[n],className:"no-underline hover:no-underline",style:{background:"transparent"},onClick:function(e){return c(e.key.toString())}},s.a.createElement(Se.a.Item,{key:"intro"},s.a.createElement(qe,null)),s.a.createElement(Se.a.Item,{key:"login"},s.a.createElement(He,null)),s.a.createElement(Se.a.Item,{key:"feedback"},s.a.createElement(Fe,null)),s.a.createElement(Se.a.Item,{key:"settings"},s.a.createElement(Qe,null))))})),ze=a(718),Je=a(720),Ze=a(710),$e=a(709),et=Object(o.b)((function(e){return{user:e.user,status:e.status}}),(function(e){return{requestServer:function(t,a){return e({type:H.CLIENT_REQUEST_SERVER,payload:{user:t,server:a},callback:function(e){e===n.SUCCESS&&he.b.success({content:"\u670d\u52a1\u5668\u542f\u52a8\u6210\u529f\uff01"})}})},releaseServer:function(){return e({type:H.CLIENT_RELEASE_SERVER})},replaceServer:function(){return e({type:H.CLIENT_REPLACE_SERVER})}}}))((function(e){var t=Object(r.useState)(!1),a=Object(fe.a)(t,2),n=a[0],c=a[1],l=Object(r.useRef)(e.server.status);e.server.status!==l.current&&(l.current=e.server.status,c(!1));var i=function(){if(!e.user.hasLogined)return he.b.error({content:"\u8be5\u529f\u80fd\u9700\u8981\u767b\u5f55\u624d\u53ef\u4ee5\u4f7f\u7528\uff01"})};return e.server.status===F.IDLE?s.a.createElement(ge.a,{type:"primary",onClick:function(){i()||(c(!0),e.requestServer(e.user,e.server))},loading:n},"\u7533\u8bf7"):e.server.username===e.user.username?s.a.createElement(ge.a,{type:"primary",danger:!0,onClick:function(){i()||e.releaseServer()}},"\u4e0b\u7ebf"):s.a.createElement(ge.a,{type:"primary",danger:!0,onClick:function(){i()||e.replaceServer()},className:"inline-flex items-center"},s.a.createElement(se,{type:$.WARNING,className:"text-xs"})," \u8e22\u7ebf")})),tt=Object(o.b)((function(e,t){return{user:e.user,server:t.server}}),(function(e){return{daemonServerDispatch:function(){return e({type:H.CLIENT_DAEMON_SERVER_OR_NOT})}}}))((function(e){return e.user.hasLogined&&e.server.status!==F.IDLE&&e.server.username===e.user.username?e.server.status!==F.DAEMON?s.a.createElement(ge.a,{type:"primary",onClick:e.daemonServerDispatch},"\u6258\u7ba1"):s.a.createElement(ge.a,{type:"primary",danger:!0,onClick:e.daemonServerDispatch},"\u91ca\u653e"):s.a.createElement(s.a.Fragment,null)}));C.a.defineLocale("zh-cn",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"Ah\u70b9mm\u5206",LTS:"Ah\u70b9m\u5206s\u79d2",L:"YYYY-MM-DD",LL:"YYYY\u5e74MMMD\u65e5",LLL:"YYYY\u5e74MMMD\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74MMMD\u65e5ddddAh\u70b9mm\u5206",l:"YYYY-MM-DD",ll:"YYYY\u5e74MMMD\u65e5",lll:"YYYY\u5e74MMMD\u65e5Ah\u70b9mm\u5206",llll:"YYYY\u5e74MMMD\u65e5ddddAh\u70b9mm\u5206"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u51cc\u6668"===t||"\u65e9\u4e0a"===t||"\u4e0a\u5348"===t?e:"\u4e0b\u5348"===t||"\u665a\u4e0a"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,a){var n=100*e+t;return n<600?"\u51cc\u6668":n<900?"\u65e9\u4e0a":n<1130?"\u4e0a\u5348":n<1230?"\u4e2d\u5348":n<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:function(){return 0===this.minutes()?"[\u4eca\u5929]Ah[\u70b9\u6574]":"[\u4eca\u5929]LT"},nextDay:function(){return 0===this.minutes()?"[\u660e\u5929]Ah[\u70b9\u6574]":"[\u660e\u5929]LT"},lastDay:function(){return 0===this.minutes()?"[\u6628\u5929]Ah[\u70b9\u6574]":"[\u6628\u5929]LT"},nextWeek:function(){var e,t;return e=C()().startOf("week"),t=this.unix()-e.unix()>=604800?"[\u4e0b]":"[\u672c]",0===this.minutes()?t+"dddAh\u70b9\u6574":t+"dddAh\u70b9mm"},lastWeek:function(){var e,t;return e=C()().startOf("week"),t=this.unix()<e.unix()?"[\u4e0a]":"[\u672c]",0===this.minutes()?t+"dddAh\u70b9\u6574":t+"dddAh\u70b9mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(\u65e5|\u6708|\u5468)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"\u65e5";case"M":return e+"\u6708";case"w":case"W":return e+"\u5468";default:return e}},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",m:"1 \u5206\u949f",mm:"%d \u5206\u949f",h:"1 \u5c0f\u65f6",hh:"%d \u5c0f\u65f6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4e2a\u6708",MM:"%d \u4e2a\u6708",y:"1 \u5e74",yy:"%d \u5e74"},week:{dow:1,doy:4}});var at=C.a,nt=Object(o.b)((function(e){return{servers:e.servers,clients:e.clients}}))((function(e){console.log("rendered CompServers");var t=[{title:"\u6635\u79f0",dataIndex:"username",render:function(e,t){return s.a.createElement(ce.b,null,s.a.createElement(ze.a,{src:t.avatar,icon:s.a.createElement(Pe.a,{className:"text-2xl"})}),e?s.a.createElement("p",null,e):s.a.createElement("p",{className:"text-gray-500"},"No One"))}},{title:"\u7c7b\u578b",dataIndex:"tokenType",render:function(e){switch(e){case x.MOBILE:return s.a.createElement(se,{type:$.PUPPET_MOBILE,className:"text-2xl"});case x.PAD:return s.a.createElement(se,{type:$.PUPPET_PAD,className:"text-2xl"});case x.WEB:return s.a.createElement(se,{type:$.PUPPET_WEB,className:"text-2xl"})}}},{title:"\u514d\u8d39",dataIndex:"isFree",render:function(e){return s.a.createElement(se,{type:e?$.RIGHT:$.WRONG})}},{title:"\u72b6\u6001",dataIndex:"status",render:function(e){switch(e){case F.IDLE:return s.a.createElement(Je.a,{color:"blue"},"\u7a7a\u95f2");case F.CONNECTING:return s.a.createElement(Je.a,{color:"orange"},"\u542f\u52a8\u4e2d");case F.RUNNING:return s.a.createElement(Je.a,{color:"green"},"\u8fd0\u884c\u4e2d");case F.DAEMON:return s.a.createElement(Je.a,{color:"magenta"},"\u6258\u7ba1\u4e2d");case F.ERROR:return s.a.createElement(Je.a,{color:"red"},"\u5f02\u5e38");default:throw new Error}}},{title:"\u6700\u8fd1\u4f7f\u7528",dataIndex:"lastTime",render:function(e){return e?s.a.createElement("p",null,at(e).fromNow()):"-"}},{title:"\u64cd\u4f5c",key:"apply",render:function(e,t){return s.a.createElement(ce.b,null,s.a.createElement(et,{server:t}),s.a.createElement(tt,{server:t}))}}];return s.a.createElement(Ze.a,{title:"\u670d\u52a1\u5668",bodyStyle:{padding:0}},s.a.createElement($e.a,{columns:t,dataSource:e.servers.map((function(e){return e.key=e.token,e})),pagination:!1}))})),rt=a(92),st=a(715),ct=a(369),lt=Object(o.b)(null,(function(e,t){return{sendMessage:function(t,a){e({type:H.CLIENT_SEND_WX_MESSAGE,payload:t,callback:a})}}}))((function(e){var t=e.msg.from.alias||e.msg.from.name,a=Object(r.useState)(!1),c=Object(fe.a)(a,2),l=c[0],i=c[1],o=Object(r.useRef)(null);return s.a.createElement(ct.a,{visible:l,onVisibleChange:function(e){return i(e)},trigger:"click",placement:"top",content:s.a.createElement(Ne.a.Search,{ref:o,autoFocus:!0,placeholder:"To ".concat(t,": "),enterButton:"\u56de\u590d",onSearch:function(t){var a=null!==e.msg.roomID,r={content:t,time:new Date,toID:a?e.msg.roomID:e.msg.from.id,isRoom:a};console.log("reply: ",t),e.sendMessage(r,(function(e){e===n.SUCCESS?he.b.success({content:"\u56de\u590d\u6210\u529f\uff01"}):he.b.error({content:"\u56de\u590d\u5931\u8d25"})})),i(!1)}}),title:"\u5feb\u6377\u56de\u590d",className:"list"},s.a.createElement("div",{className:"relative flex justify-between items-start w-full"},s.a.createElement("div",{className:"avatar mr-4"},s.a.createElement(ze.a,{src:e.msg.from.avatar})),s.a.createElement("div",{className:"rows flex-1"},s.a.createElement("div",{className:"row-1 inline-flex justify-between items-center w-full"},s.a.createElement("div",{className:"inline-flex"},s.a.createElement("p",{className:"username text-gray-800"},e.msg.from.name),e.msg.from.alias&&s.a.createElement("p",{className:"text-gray-700"},"\uff08",e.msg.from.alias,"\uff09")),s.a.createElement("div",{className:"content text-gray-600"},at(e.msg.time).fromNow())),s.a.createElement("div",{className:"row-2"},s.a.createElement("p",{className:"text-black text-sm break-words"},e.msg.content)))))})),it=Object(o.b)((function(e){return{wechatyMessages:e.wxMessages}}))((function(e){console.log("rendered CompWechatyMessages");var t=Object(r.useRef)(null),a=Object(r.useRef)(null);return Object(r.useEffect)((function(){t.current&&a.current&&t.current.offsetHeight>=400&&a.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})})),s.a.createElement(Ze.a,{title:"\u5b9e\u65f6\u6d88\u606f"},0===e.wechatyMessages.length?s.a.createElement(rt.a,{image:rt.a.PRESENTED_IMAGE_SIMPLE,description:!1}):s.a.createElement("div",{className:"overflow-y-scroll break-words pr-4",style:{maxHeight:"400px",minHeight:"300px"},ref:t},e.wechatyMessages.map((function(e){return s.a.createElement("div",{key:e.id,className:"relative"},s.a.createElement(lt,{msg:e,key:e.id}),s.a.createElement(st.a,{status:e.roomID?"default":"success",style:{position:"absolute",left:"4px",top:"4px"}}),s.a.createElement(ae.a,{className:"my-2"}))})),s.a.createElement("div",{ref:a})))})),ot=Object(o.b)((function(e){return{userMessages:e.userMessages,clientCount:e.clients,user:e.user}}),(function(e){return{sendUserChat:function(t){console.log("sending message"),e({type:H.CLIENT_SEND_USER_CHAT,payload:t})}}}))((function(e){console.log("rendered CompUserChats");var t=Object(r.useState)(""),a=Object(fe.a)(t,2),n=a[0],c=a[1],l=Object(r.useRef)(null),i=Object(r.useRef)(null),o=Object(r.useRef)(new Date);Object(r.useEffect)((function(){e.user.username||be.a.confirm({title:"\u521d\u4f53\u9a8c\u63d0\u793a",content:s.a.createElement("div",null,s.a.createElement("p",null,"1. \u6d4f\u89c8\u5668\u6bcf\u6b21\u5237\u65b0\u6216\u6253\u5f00\uff0c\u5b9e\u65f6\u804a\u5929\u5ba4\u7684\u5185\u5bb9\u90fd\u4f1a\u91cd\u7f6e\u54e6"),s.a.createElement("p",null,"2. \u6ce8\u518c\u767b\u5f55\u4e4b\u540e\u5c31\u4f1a\u8bb0\u4f4f\u4f60\u7684\u4fe1\u606f\u5566~"),s.a.createElement("p",null,'3. \u767b\u5f55\u540e\u5373\u53ef\u70b9\u51fb"\u7533\u8bf7"\u6309\u94ae\u626b\u7801\u9009\u62e9\u81ea\u5df1\u7684\u673a\u5668\u4eba\uff0c\u8bf7\u5728PC\u9875\u9762\u4e0a\u767b\u5f55\u54e6\uff01\uff08\u56e0\u4e3a\u624b\u673a\u4e0d\u597d\u626b\u81ea\u5df1\u5c4f\u5e55\u7684\u7801~\uff09'))})}),[]),Object(r.useEffect)((function(){l.current&&i.current&&i.current.offsetHeight>=400&&l.current.scrollIntoView({behavior:"smooth",block:"nearest"})}));return s.a.createElement(Ze.a,{title:"\u5b9e\u65f6\u804a\u5929\u5ba4\uff08".concat(e.clientCount,"\uff09")},s.a.createElement("div",{className:"chats-display",style:{maxHeight:400,overflow:"scroll"}},e.userMessages.length>0?s.a.createElement("div",{ref:i},e.userMessages.map((function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("div",{className:"row-1 inline-flex justify-between items-center w-full"},s.a.createElement("div",{className:"inline-flex"},s.a.createElement("p",{className:"username text-black font-semibold"},"@ ",t.username)),s.a.createElement("div",{className:"content text-gray-600"},at(t.time).fromNow())),s.a.createElement("div",{className:"row-2"},s.a.createElement("p",{className:"text-gray-800 text-sm break-words pl-4"},t.content)),a!==e.userMessages.length-1&&s.a.createElement(ae.a,{className:"my-2"}))}))):s.a.createElement(rt.a,{image:rt.a.PRESENTED_IMAGE_SIMPLE,description:!1}),s.a.createElement("div",{ref:l})),s.a.createElement("div",null,s.a.createElement(Ce.a,{autoSize:{minRows:3,maxRows:6},className:"my-2 ",value:n,placeholder:e.clientCount>1?"\u5f53\u524d\u6709".concat(e.clientCount,"\u4eba\u5728\u7ebf\u54e6\uff0c\u8981\u4e0d\u6253\u58f0\u62db\u547cpa\uff1f"):"\u4f60\u60f3\u8bf4\u70b9\u4ec0\u4e48\u5417~",onChange:function(e){c(e.target.value)}})),s.a.createElement("div",{className:"flex justify-end"},s.a.createElement(ge.a,{type:"primary",onClick:function(){if(!e.user.hasLogined)return he.b.warning({content:"\u9700\u8981\u5148\u767b\u9646\u624d\u53ef\u4ee5\u804a\u5929\u54e6\uff01"});if(""===n)return he.b.warning({content:"\u60a8\u5012\u662f\u8f93\u51fa\u5440\uff01"});if((new Date).getTime()-o.current.getTime()<1e3)return he.b.warning({content:"\u60a8\u7684\u64cd\u4f5c\u592a\u5feb\u5566\uff01"});var t={username:e.user.username,content:n,time:new Date};console.log(t),e.sendUserChat(t),c(""),o.current=new Date}},"\u53d1\u9001")))})),ut=function(){return console.log("rendered CompContent1"),s.a.createElement("div",{className:"w-full p-0 md:p-4 flex flex-col"},s.a.createElement("div",{className:"order-2 my-4"},s.a.createElement(nt,null)),s.a.createElement("div",{className:"order-3 my-4"},s.a.createElement(it,null)),s.a.createElement("div",{className:"order-4 my-4"},s.a.createElement(ot,null)))},mt=function(){return Math.floor(7*Math.random())+3},Et=function(){var e=Object(d.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.post(V.add,{serviceType:t.key});case 2:he.b.success({content:"\u5df2\u6536\u5230\u60a8\u5bf9\u3010".concat(t.title,"\u3011\u8fd9\u9879\u529f\u80fd\u7684\u7684\u9700\u6c42\u53cd\u9988\uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u8003\u8651\u7684\uff01")});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dt=function(){var e=[{title:"\u64a4\u56de\u76d1\u63a7",key:y.Recall},{title:"\u5b9a\u65f6\u63d0\u9192",key:y.Timing},{title:"\u6d88\u606f\u5907\u4efd",key:y.Backup},{title:"\u5934\u50cf\u5899",key:y.Avatar},{title:"\u793e\u4ea4\u5708",key:y.Network}];return s.a.createElement(Ze.a,{title:"\u670d\u52a1\u8ba2\u9605"},s.a.createElement("div",{className:"flex justify-around flex-wrap"},e.map((function(e){return s.a.createElement("div",{key:e.key,className:"w-16 h-16 m-1 rounded text-white flex justify-center items-center flex-wrap text-base px-4 box-border text-center hover:cursor-pointer",style:{backgroundColor:"#"+Array.from(Array(6)).map(mt).join(""),cursor:"pointer"},onClick:function(){return Et(e)}},s.a.createElement("p",null,e.title))}))))},_t=a(721),ft=a(182),St=a(727),pt=Object(o.b)(null,(function(e){return{sendMessage:function(t){return e({type:H.CLIENT_SEND_WX_MESSAGE,payload:t})}}}))((function(e){var t=Object(r.useState)(!1),a=Object(fe.a)(t,2),c=a[0],l=a[1];return s.a.createElement(_t.b.Item,{key:e.item.id,actions:[s.a.createElement(ct.a,{placement:"topRight",visible:c,trigger:"click",onVisibleChange:function(e){return l(e)},content:s.a.createElement(ft.a,{enterButton:"\u6d88\u606f\u53d1\u9001",onSearch:function(t){e.sendMessage({time:new Date,toID:e.item.id,isRoom:Boolean(e.item.topic),content:t},(function(e){e===n.SUCCESS?he.b.success({content:"\u53d1\u9001\u6210\u529f"}):he.b.error({content:"\u53d1\u9001\u5931\u8d25"})})),l(!1)}})},s.a.createElement(ge.a,{type:"text",onClick:function(){return l(!0)}},s.a.createElement(St.a,null)))],className:"list"},s.a.createElement(_t.b.Item.Meta,{avatar:s.a.createElement(ct.a,{content:s.a.createElement("img",{src:e.item.avatar,alt:e.item.name||e.item.topic,style:{width:"160px",height:"160px",opacity:"90%"}}),placement:"top",trigger:"click"},s.a.createElement("div",{className:"relative"},s.a.createElement(ze.a,{src:e.item.avatar,className:"avatar"}),s.a.createElement(ze.a,{src:e.item.avatar,className:"avatar-blur absolute top-0 left-0"}))),title:e.item.name||"".concat(e.item.topic,"\uff08").concat(e.item.members,"\uff09"),description:e.item.alias}))})),Rt=a(712),Nt=a(360),ht=a.n(Nt),Ot=Object(o.b)((function(e){return{wxid:e.wxSelf.id}}),(function(e,t){return{pushMoreFriends:function(t){return e({type:G.FETCH_MORE_FRIENDS_SUCCESS,payload:t})}}}))((function(e){var t=Object(r.useState)(!1),a=Object(fe.a)(t,1)[0],n=Object(r.useRef)(0);console.log("rendered "+e.title);return s.a.createElement(Ze.a,{title:e.title,bodyStyle:{padding:0,maxHeight:"300px",overflow:"scroll"},extra:s.a.createElement("p",null,"(",e.items.length," / ",e.itemsCount,")")},a?s.a.createElement("div",{className:"p-4"},Array.from(Array(3)).map((function(e,t){return s.a.createElement(Rt.a,{title:!0,loading:!0,avatar:!0,children:!0,paragraph:!0,active:!0,key:t})}))):s.a.createElement(ht.a,{pageStart:n.current,initialLoad:!0,loadMore:function(){var t=e.title.includes("\u7fa4")?W.rooms:W.friends;U.get(t,{params:{wxid:e.wxid,skip:n.current}}).then((function(t){var a=t.data;n.current+=100,e.pushMoreFriends(a)})).catch((function(e){console.log({err:e})}))},hasMore:n.current+100<e.itemsCount,useWindow:!1,threshold:600,loader:s.a.createElement("div",{className:"w-full h-24 flex items-center justify-center",key:"loader"},s.a.createElement(le.a,{size:"default"}))},e.items.map((function(e){return s.a.createElement(pt,{item:e,key:e.id})}))))})),bt=Object(o.b)((function(e){return{friends:e.wxFriends,rooms:e.wxRooms,friendsCount:e.wxFriendsCount}}))((function(e){return console.log("rendered CompContent2"),s.a.createElement("div",{className:"w-full p-0 md:p-4 h-full flex flex-col"},s.a.createElement("div",{className:"order-9 md:order-5 my-4"},s.a.createElement(dt,null)),s.a.createElement("div",{className:"order-6 my-4"},s.a.createElement(Ot,{items:e.friends,title:"\u597d\u53cb\u5217\u8868",itemsCount:e.friendsCount})),s.a.createElement("div",{className:"order-7 my-4"},s.a.createElement(Ot,{items:e.rooms,title:"\u7fa4\u7ec4\u5217\u8868",itemsCount:e.rooms.length})))})),gt=Object(o.b)((function(e){return{visibility:e.status[L.ScanModal],wechatyScan:e.wxScan}}))((function(e){console.log("rendered CompScan ");var t=Object(r.useState)(""),n=Object(fe.a)(t,2),c=n[0],l=n[1],i=e.wechatyScan;return i.qrcode&&a(680).toDataURL(i.qrcode).then((function(e){return l(e)})),s.a.createElement(be.a,{title:"\u5c0f\u6210\u65f6\u5149\u5c4b\u626b\u7801\u767b\u5f55\u7cfb\u7edf",visible:e.visibility,destroyOnClose:!0,footer:null,keyboard:!1,maskClosable:!1,closable:!1},s.a.createElement("div",{className:"flex flex-col items-center"},i.status===w.Waiting&&c?s.a.createElement("img",{src:c,alt:"\u767b\u5f55\u4e8c\u7ef4\u7801"}):s.a.createElement(le.a,{className:"h-32 flex items-center",size:"default"}),s.a.createElement("p",null,function(){switch(i.status){case w.Unknown:return"\u6b63\u5728\u52aa\u529b\u52a0\u8f7d\uff0c\u563f\u5440\u5440\u5440\u2026\u2026";case w.Waiting:return"\u8bf7\u53ca\u65f6\u626b\u63cf\u54e6~";case w.Scanned:return"\u626b\u63cf\u6210\u529f\uff01\u7b49\u5019\u786e\u8ba4\u2026\u2026";case w.Confirmed:return"\u786e\u8ba4\u6210\u529f\uff01\u6b63\u5728\u52a0\u8f7d\u2026\u2026";case w.Cancel:return"\u53d6\u6d88\u5566";case w.Timeout:return"\u8d85\u65f6\uff01"}}())))})),Ct=function(){return console.log("rendered CompInvisible"),s.a.createElement("div",null,s.a.createElement(gt,null))},It=function(){return console.log("rendered APP"),s.a.createElement(u.a,{className:"relative min-h-screen min-w-screen"},s.a.createElement(u.a.Header,{className:"flex items-center bg-pink-200 p-4"},s.a.createElement(Ke,null)),s.a.createElement(u.a.Content,{className:"w-full xl:w-4/5 mx-auto flex flex-wrap"},s.a.createElement("div",{className:"order-1 flex-1 w-full md:w-3/5"},s.a.createElement(ut,null)),s.a.createElement("div",{className:"order-2 w-full md:w-2/5"},s.a.createElement(bt,null))),s.a.createElement(u.a.Footer,{className:" w-full"},s.a.createElement(_e,null)),s.a.createElement(Ct,null))};a(701),a(702),a(703),a(704),a(705);l.a.render(s.a.createElement(s.a.Fragment,null,s.a.createElement(o.a,{store:ee},s.a.createElement(i.a,{componentSize:"small"},s.a.createElement(It,null)))),document.getElementById("root"))}},[[372,1,2]]]);
//# sourceMappingURL=main.ec26732c.chunk.js.map